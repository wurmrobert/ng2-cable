!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs/Subject"),require("rxjs/add/operator/filter"),require("rxjs/add/operator/map"),require("actioncable"),require("@angular/core")):"function"==typeof define&&define.amd?define(["exports","rxjs/Subject","rxjs/add/operator/filter","rxjs/add/operator/map","actioncable","@angular/core"],t):t(e["ng2-cable"]=e["ng2-cable"]||{},e.rxjs_Subject,null,e.Rx.Observable.prototype,e.ActionCable,e.ng.core)}(this,function(e,t,n,r,o,c){"use strict";var i=function(){function e(){this._eventBus=new t.Subject}return e.prototype.broadcast=function(e,t){this._eventBus.next({key:e,data:t})},e.prototype.on=function(e){return this._eventBus.asObservable().filter(function(t){return t.key===e}).map(function(e){return e.data})},e}(),s=function(){function e(e){this.url=e}return e}(),a=function(){function e(e){this.configuration=e,this.channels={},this.connect(e.url)}return e.prototype.subscribe=function(e,t){void 0===t&&(t={});var n="object"==typeof e?e.channel:e,r=Object.assign({channel:e},t),o=new i,c=this.cable.subscriptions.create(r,{received:function(e){o.broadcast(e.action,e)}});return this.channels[n]={subscription:c,broadcaster:o},o},e.prototype.unsubscribe=function(e){if(this.channels[e].subscription){var t=this.channels[e].subscription;this.cable.subscriptions.remove(t)}else console.error("Unable to unsubscribe channel with name "+e+" from ng2-cable!")},e.prototype.perform=function(e,t,n){this.channels[e].subscription.perform(t,n)},e.prototype.connect=function(e){return this.cable=o.createConsumer(e),this.cable.connect(),this.cable},e.prototype.disconnect=function(){this.cable.disconnect()},e.decorators=[{type:c.Injectable}],e.ctorParameters=function(){return[{type:s,decorators:[{type:c.Optional}]}]},e}(),u=function(){function e(){}return e.forConfig=function(t){return{ngModule:e,providers:[{provide:s,useFactory:t}]}},e.decorators=[{type:c.NgModule,args:[{imports:[],providers:[a]}]}],e.ctorParameters=function(){return[]},e}();e.Broadcaster=i,e.Configuration=s,e.Ng2CableService=a,e.Ng2CableModule=u,Object.defineProperty(e,"__esModule",{value:!0})});