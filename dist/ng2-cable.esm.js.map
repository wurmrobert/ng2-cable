{"version":3,"file":"ng2-cable.esm.js","sources":["../ts/broadcaster.ts","../ts/configuration.ts","../node_modules/actioncable/lib/assets/compiled/action_cable.js","../ts/ng2-cable.service.ts","../ts/ng2-cable.module.ts"],"sourcesContent":["import { Subject, Observable } from 'rxjs/Rx';\n\ninterface BroadcastEvent {\n  key: any;\n  data?: any;\n}\n\nexport class Broadcaster {\n  private _eventBus: Subject<BroadcastEvent>;\n\n  constructor() {\n    this._eventBus = new Subject<BroadcastEvent>();\n  }\n\n  broadcast(key: any, data?: any) {\n    this._eventBus.next({key, data});\n  }\n\n  on<T>(key: any): Observable<T> {\n    return this._eventBus.asObservable()\n      .filter(event => event.key === key)\n      .map(event => <T>event.data);\n  }\n}\n","export class Configuration {\n    constructor(public url: string) {}\n}\n","(function() {\n  var context = this;\n\n  (function() {\n    (function() {\n      var slice = [].slice;\n\n      this.ActionCable = {\n        INTERNAL: {\n          \"message_types\": {\n            \"welcome\": \"welcome\",\n            \"ping\": \"ping\",\n            \"confirmation\": \"confirm_subscription\",\n            \"rejection\": \"reject_subscription\"\n          },\n          \"default_mount_path\": \"/cable\",\n          \"protocols\": [\"actioncable-v1-json\", \"actioncable-unsupported\"]\n        },\n        WebSocket: window.WebSocket,\n        logger: window.console,\n        createConsumer: function(url) {\n          var ref;\n          if (url == null) {\n            url = (ref = this.getConfig(\"url\")) != null ? ref : this.INTERNAL.default_mount_path;\n          }\n          return new ActionCable.Consumer(this.createWebSocketURL(url));\n        },\n        getConfig: function(name) {\n          var element;\n          element = document.head.querySelector(\"meta[name='action-cable-\" + name + \"']\");\n          return element != null ? element.getAttribute(\"content\") : void 0;\n        },\n        createWebSocketURL: function(url) {\n          var a;\n          if (url && !/^wss?:/i.test(url)) {\n            a = document.createElement(\"a\");\n            a.href = url;\n            a.href = a.href;\n            a.protocol = a.protocol.replace(\"http\", \"ws\");\n            return a.href;\n          } else {\n            return url;\n          }\n        },\n        startDebugging: function() {\n          return this.debugging = true;\n        },\n        stopDebugging: function() {\n          return this.debugging = null;\n        },\n        log: function() {\n          var messages, ref;\n          messages = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n          if (this.debugging) {\n            messages.push(Date.now());\n            return (ref = this.logger).log.apply(ref, [\"[ActionCable]\"].concat(slice.call(messages)));\n          }\n        }\n      };\n\n    }).call(this);\n  }).call(context);\n\n  var ActionCable = context.ActionCable;\n\n  (function() {\n    (function() {\n      var bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n      ActionCable.ConnectionMonitor = (function() {\n        var clamp, now, secondsSince;\n\n        ConnectionMonitor.pollInterval = {\n          min: 3,\n          max: 30\n        };\n\n        ConnectionMonitor.staleThreshold = 6;\n\n        function ConnectionMonitor(connection) {\n          this.connection = connection;\n          this.visibilityDidChange = bind(this.visibilityDidChange, this);\n          this.reconnectAttempts = 0;\n        }\n\n        ConnectionMonitor.prototype.start = function() {\n          if (!this.isRunning()) {\n            this.startedAt = now();\n            delete this.stoppedAt;\n            this.startPolling();\n            document.addEventListener(\"visibilitychange\", this.visibilityDidChange);\n            return ActionCable.log(\"ConnectionMonitor started. pollInterval = \" + (this.getPollInterval()) + \" ms\");\n          }\n        };\n\n        ConnectionMonitor.prototype.stop = function() {\n          if (this.isRunning()) {\n            this.stoppedAt = now();\n            this.stopPolling();\n            document.removeEventListener(\"visibilitychange\", this.visibilityDidChange);\n            return ActionCable.log(\"ConnectionMonitor stopped\");\n          }\n        };\n\n        ConnectionMonitor.prototype.isRunning = function() {\n          return (this.startedAt != null) && (this.stoppedAt == null);\n        };\n\n        ConnectionMonitor.prototype.recordPing = function() {\n          return this.pingedAt = now();\n        };\n\n        ConnectionMonitor.prototype.recordConnect = function() {\n          this.reconnectAttempts = 0;\n          this.recordPing();\n          delete this.disconnectedAt;\n          return ActionCable.log(\"ConnectionMonitor recorded connect\");\n        };\n\n        ConnectionMonitor.prototype.recordDisconnect = function() {\n          this.disconnectedAt = now();\n          return ActionCable.log(\"ConnectionMonitor recorded disconnect\");\n        };\n\n        ConnectionMonitor.prototype.startPolling = function() {\n          this.stopPolling();\n          return this.poll();\n        };\n\n        ConnectionMonitor.prototype.stopPolling = function() {\n          return clearTimeout(this.pollTimeout);\n        };\n\n        ConnectionMonitor.prototype.poll = function() {\n          return this.pollTimeout = setTimeout((function(_this) {\n            return function() {\n              _this.reconnectIfStale();\n              return _this.poll();\n            };\n          })(this), this.getPollInterval());\n        };\n\n        ConnectionMonitor.prototype.getPollInterval = function() {\n          var interval, max, min, ref;\n          ref = this.constructor.pollInterval, min = ref.min, max = ref.max;\n          interval = 5 * Math.log(this.reconnectAttempts + 1);\n          return Math.round(clamp(interval, min, max) * 1000);\n        };\n\n        ConnectionMonitor.prototype.reconnectIfStale = function() {\n          if (this.connectionIsStale()) {\n            ActionCable.log(\"ConnectionMonitor detected stale connection. reconnectAttempts = \" + this.reconnectAttempts + \", pollInterval = \" + (this.getPollInterval()) + \" ms, time disconnected = \" + (secondsSince(this.disconnectedAt)) + \" s, stale threshold = \" + this.constructor.staleThreshold + \" s\");\n            this.reconnectAttempts++;\n            if (this.disconnectedRecently()) {\n              return ActionCable.log(\"ConnectionMonitor skipping reopening recent disconnect\");\n            } else {\n              ActionCable.log(\"ConnectionMonitor reopening\");\n              return this.connection.reopen();\n            }\n          }\n        };\n\n        ConnectionMonitor.prototype.connectionIsStale = function() {\n          var ref;\n          return secondsSince((ref = this.pingedAt) != null ? ref : this.startedAt) > this.constructor.staleThreshold;\n        };\n\n        ConnectionMonitor.prototype.disconnectedRecently = function() {\n          return this.disconnectedAt && secondsSince(this.disconnectedAt) < this.constructor.staleThreshold;\n        };\n\n        ConnectionMonitor.prototype.visibilityDidChange = function() {\n          if (document.visibilityState === \"visible\") {\n            return setTimeout((function(_this) {\n              return function() {\n                if (_this.connectionIsStale() || !_this.connection.isOpen()) {\n                  ActionCable.log(\"ConnectionMonitor reopening stale connection on visibilitychange. visbilityState = \" + document.visibilityState);\n                  return _this.connection.reopen();\n                }\n              };\n            })(this), 200);\n          }\n        };\n\n        now = function() {\n          return new Date().getTime();\n        };\n\n        secondsSince = function(time) {\n          return (now() - time) / 1000;\n        };\n\n        clamp = function(number, min, max) {\n          return Math.max(min, Math.min(max, number));\n        };\n\n        return ConnectionMonitor;\n\n      })();\n\n    }).call(this);\n    (function() {\n      var i, message_types, protocols, ref, supportedProtocols, unsupportedProtocol,\n        slice = [].slice,\n        bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n        indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n      ref = ActionCable.INTERNAL, message_types = ref.message_types, protocols = ref.protocols;\n\n      supportedProtocols = 2 <= protocols.length ? slice.call(protocols, 0, i = protocols.length - 1) : (i = 0, []), unsupportedProtocol = protocols[i++];\n\n      ActionCable.Connection = (function() {\n        Connection.reopenDelay = 500;\n\n        function Connection(consumer) {\n          this.consumer = consumer;\n          this.open = bind(this.open, this);\n          this.subscriptions = this.consumer.subscriptions;\n          this.monitor = new ActionCable.ConnectionMonitor(this);\n          this.disconnected = true;\n        }\n\n        Connection.prototype.send = function(data) {\n          if (this.isOpen()) {\n            this.webSocket.send(JSON.stringify(data));\n            return true;\n          } else {\n            return false;\n          }\n        };\n\n        Connection.prototype.open = function() {\n          if (this.isActive()) {\n            ActionCable.log(\"Attempted to open WebSocket, but existing socket is \" + (this.getState()));\n            return false;\n          } else {\n            ActionCable.log(\"Opening WebSocket, current state is \" + (this.getState()) + \", subprotocols: \" + protocols);\n            if (this.webSocket != null) {\n              this.uninstallEventHandlers();\n            }\n            this.webSocket = new ActionCable.WebSocket(this.consumer.url, protocols);\n            this.installEventHandlers();\n            this.monitor.start();\n            return true;\n          }\n        };\n\n        Connection.prototype.close = function(arg) {\n          var allowReconnect, ref1;\n          allowReconnect = (arg != null ? arg : {\n            allowReconnect: true\n          }).allowReconnect;\n          if (!allowReconnect) {\n            this.monitor.stop();\n          }\n          if (this.isActive()) {\n            return (ref1 = this.webSocket) != null ? ref1.close() : void 0;\n          }\n        };\n\n        Connection.prototype.reopen = function() {\n          var error;\n          ActionCable.log(\"Reopening WebSocket, current state is \" + (this.getState()));\n          if (this.isActive()) {\n            try {\n              return this.close();\n            } catch (error1) {\n              error = error1;\n              return ActionCable.log(\"Failed to reopen WebSocket\", error);\n            } finally {\n              ActionCable.log(\"Reopening WebSocket in \" + this.constructor.reopenDelay + \"ms\");\n              setTimeout(this.open, this.constructor.reopenDelay);\n            }\n          } else {\n            return this.open();\n          }\n        };\n\n        Connection.prototype.getProtocol = function() {\n          var ref1;\n          return (ref1 = this.webSocket) != null ? ref1.protocol : void 0;\n        };\n\n        Connection.prototype.isOpen = function() {\n          return this.isState(\"open\");\n        };\n\n        Connection.prototype.isActive = function() {\n          return this.isState(\"open\", \"connecting\");\n        };\n\n        Connection.prototype.isProtocolSupported = function() {\n          var ref1;\n          return ref1 = this.getProtocol(), indexOf.call(supportedProtocols, ref1) >= 0;\n        };\n\n        Connection.prototype.isState = function() {\n          var ref1, states;\n          states = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n          return ref1 = this.getState(), indexOf.call(states, ref1) >= 0;\n        };\n\n        Connection.prototype.getState = function() {\n          var ref1, state, value;\n          for (state in WebSocket) {\n            value = WebSocket[state];\n            if (value === ((ref1 = this.webSocket) != null ? ref1.readyState : void 0)) {\n              return state.toLowerCase();\n            }\n          }\n          return null;\n        };\n\n        Connection.prototype.installEventHandlers = function() {\n          var eventName, handler;\n          for (eventName in this.events) {\n            handler = this.events[eventName].bind(this);\n            this.webSocket[\"on\" + eventName] = handler;\n          }\n        };\n\n        Connection.prototype.uninstallEventHandlers = function() {\n          var eventName;\n          for (eventName in this.events) {\n            this.webSocket[\"on\" + eventName] = function() {};\n          }\n        };\n\n        Connection.prototype.events = {\n          message: function(event) {\n            var identifier, message, ref1, type;\n            if (!this.isProtocolSupported()) {\n              return;\n            }\n            ref1 = JSON.parse(event.data), identifier = ref1.identifier, message = ref1.message, type = ref1.type;\n            switch (type) {\n              case message_types.welcome:\n                this.monitor.recordConnect();\n                return this.subscriptions.reload();\n              case message_types.ping:\n                return this.monitor.recordPing();\n              case message_types.confirmation:\n                return this.subscriptions.notify(identifier, \"connected\");\n              case message_types.rejection:\n                return this.subscriptions.reject(identifier);\n              default:\n                return this.subscriptions.notify(identifier, \"received\", message);\n            }\n          },\n          open: function() {\n            ActionCable.log(\"WebSocket onopen event, using '\" + (this.getProtocol()) + \"' subprotocol\");\n            this.disconnected = false;\n            if (!this.isProtocolSupported()) {\n              ActionCable.log(\"Protocol is unsupported. Stopping monitor and disconnecting.\");\n              return this.close({\n                allowReconnect: false\n              });\n            }\n          },\n          close: function(event) {\n            ActionCable.log(\"WebSocket onclose event\");\n            if (this.disconnected) {\n              return;\n            }\n            this.disconnected = true;\n            this.monitor.recordDisconnect();\n            return this.subscriptions.notifyAll(\"disconnected\", {\n              willAttemptReconnect: this.monitor.isRunning()\n            });\n          },\n          error: function() {\n            return ActionCable.log(\"WebSocket onerror event\");\n          }\n        };\n\n        return Connection;\n\n      })();\n\n    }).call(this);\n    (function() {\n      var slice = [].slice;\n\n      ActionCable.Subscriptions = (function() {\n        function Subscriptions(consumer) {\n          this.consumer = consumer;\n          this.subscriptions = [];\n        }\n\n        Subscriptions.prototype.create = function(channelName, mixin) {\n          var channel, params, subscription;\n          channel = channelName;\n          params = typeof channel === \"object\" ? channel : {\n            channel: channel\n          };\n          subscription = new ActionCable.Subscription(this.consumer, params, mixin);\n          return this.add(subscription);\n        };\n\n        Subscriptions.prototype.add = function(subscription) {\n          this.subscriptions.push(subscription);\n          this.consumer.ensureActiveConnection();\n          this.notify(subscription, \"initialized\");\n          this.sendCommand(subscription, \"subscribe\");\n          return subscription;\n        };\n\n        Subscriptions.prototype.remove = function(subscription) {\n          this.forget(subscription);\n          if (!this.findAll(subscription.identifier).length) {\n            this.sendCommand(subscription, \"unsubscribe\");\n          }\n          return subscription;\n        };\n\n        Subscriptions.prototype.reject = function(identifier) {\n          var i, len, ref, results, subscription;\n          ref = this.findAll(identifier);\n          results = [];\n          for (i = 0, len = ref.length; i < len; i++) {\n            subscription = ref[i];\n            this.forget(subscription);\n            this.notify(subscription, \"rejected\");\n            results.push(subscription);\n          }\n          return results;\n        };\n\n        Subscriptions.prototype.forget = function(subscription) {\n          var s;\n          this.subscriptions = (function() {\n            var i, len, ref, results;\n            ref = this.subscriptions;\n            results = [];\n            for (i = 0, len = ref.length; i < len; i++) {\n              s = ref[i];\n              if (s !== subscription) {\n                results.push(s);\n              }\n            }\n            return results;\n          }).call(this);\n          return subscription;\n        };\n\n        Subscriptions.prototype.findAll = function(identifier) {\n          var i, len, ref, results, s;\n          ref = this.subscriptions;\n          results = [];\n          for (i = 0, len = ref.length; i < len; i++) {\n            s = ref[i];\n            if (s.identifier === identifier) {\n              results.push(s);\n            }\n          }\n          return results;\n        };\n\n        Subscriptions.prototype.reload = function() {\n          var i, len, ref, results, subscription;\n          ref = this.subscriptions;\n          results = [];\n          for (i = 0, len = ref.length; i < len; i++) {\n            subscription = ref[i];\n            results.push(this.sendCommand(subscription, \"subscribe\"));\n          }\n          return results;\n        };\n\n        Subscriptions.prototype.notifyAll = function() {\n          var args, callbackName, i, len, ref, results, subscription;\n          callbackName = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];\n          ref = this.subscriptions;\n          results = [];\n          for (i = 0, len = ref.length; i < len; i++) {\n            subscription = ref[i];\n            results.push(this.notify.apply(this, [subscription, callbackName].concat(slice.call(args))));\n          }\n          return results;\n        };\n\n        Subscriptions.prototype.notify = function() {\n          var args, callbackName, i, len, results, subscription, subscriptions;\n          subscription = arguments[0], callbackName = arguments[1], args = 3 <= arguments.length ? slice.call(arguments, 2) : [];\n          if (typeof subscription === \"string\") {\n            subscriptions = this.findAll(subscription);\n          } else {\n            subscriptions = [subscription];\n          }\n          results = [];\n          for (i = 0, len = subscriptions.length; i < len; i++) {\n            subscription = subscriptions[i];\n            results.push(typeof subscription[callbackName] === \"function\" ? subscription[callbackName].apply(subscription, args) : void 0);\n          }\n          return results;\n        };\n\n        Subscriptions.prototype.sendCommand = function(subscription, command) {\n          var identifier;\n          identifier = subscription.identifier;\n          return this.consumer.send({\n            command: command,\n            identifier: identifier\n          });\n        };\n\n        return Subscriptions;\n\n      })();\n\n    }).call(this);\n    (function() {\n      ActionCable.Subscription = (function() {\n        var extend;\n\n        function Subscription(consumer, params, mixin) {\n          this.consumer = consumer;\n          if (params == null) {\n            params = {};\n          }\n          this.identifier = JSON.stringify(params);\n          extend(this, mixin);\n        }\n\n        Subscription.prototype.perform = function(action, data) {\n          if (data == null) {\n            data = {};\n          }\n          data.action = action;\n          return this.send(data);\n        };\n\n        Subscription.prototype.send = function(data) {\n          return this.consumer.send({\n            command: \"message\",\n            identifier: this.identifier,\n            data: JSON.stringify(data)\n          });\n        };\n\n        Subscription.prototype.unsubscribe = function() {\n          return this.consumer.subscriptions.remove(this);\n        };\n\n        extend = function(object, properties) {\n          var key, value;\n          if (properties != null) {\n            for (key in properties) {\n              value = properties[key];\n              object[key] = value;\n            }\n          }\n          return object;\n        };\n\n        return Subscription;\n\n      })();\n\n    }).call(this);\n    (function() {\n      ActionCable.Consumer = (function() {\n        function Consumer(url) {\n          this.url = url;\n          this.subscriptions = new ActionCable.Subscriptions(this);\n          this.connection = new ActionCable.Connection(this);\n        }\n\n        Consumer.prototype.send = function(data) {\n          return this.connection.send(data);\n        };\n\n        Consumer.prototype.connect = function() {\n          return this.connection.open();\n        };\n\n        Consumer.prototype.disconnect = function() {\n          return this.connection.close({\n            allowReconnect: false\n          });\n        };\n\n        Consumer.prototype.ensureActiveConnection = function() {\n          if (!this.connection.isActive()) {\n            return this.connection.open();\n          }\n        };\n\n        return Consumer;\n\n      })();\n\n    }).call(this);\n  }).call(this);\n\n  if (typeof module === \"object\" && module.exports) {\n    module.exports = ActionCable;\n  } else if (typeof define === \"function\" && define.amd) {\n    define(ActionCable);\n  }\n}).call(this);\n","import { Configuration } from './configuration';\nimport { Injectable, Optional } from '@angular/core';\nimport ActionCable from 'actioncable';\nimport { Broadcaster } from './broadcaster';\n\n@Injectable()\nexport class Ng2CableService {\n  public cable: any;\n  public channels : any = {};\n\n  constructor(@Optional() public configuration: Configuration) {\n    this.connect(configuration.url);\n  }\n\n  subscribe(channel : any, params={}) : Broadcaster {\n    let channelName = (typeof(channel) === 'object') ? channel['channel'] : channel;\n    let subscriptionParams = Object.assign({ channel: channel }, params);\n    let broadcaster = new Broadcaster();\n    let subscription = this.cable.subscriptions.create(subscriptionParams, {\n          received: (data) => {\n            broadcaster.broadcast((data.action || channel), data);\n          }\n        });\n    this.channels[channelName] = {\n      subscription: subscription,\n      broadcaster: broadcaster\n    };\n    return broadcaster;\n  }\n\n  unsubscribe(channel : string) : void {\n    let subscription = this.channels[channel].subscription;\n    this.cable.subscriptions.remove(subscription);\n  }\n\n  perform(channel : string, action : string, data : any) : void {\n    this.channels[channel].subscription.perform(action, data);\n  }\n\n  connect(url : string): any {\n    this.cable = ActionCable.createConsumer(url);\n    this.cable.connect();\n    return this.cable;\n  }\n\n  disconnect(): void {\n    this.cable.disconnect();\n  }\n}\n","import { Configuration } from './configuration';\nimport { NgModule, ModuleWithProviders } from '@angular/core';\nimport { Ng2CableService } from './ng2-cable.service';\nimport { Broadcaster } from './broadcaster';\n\n@NgModule({\n\timports: [],\n\tproviders: [\n\t\tNg2CableService,\n\t\tBroadcaster\n\t]\n})\nexport class Ng2CableModule {\n\tpublic static forConfig(configurationFactory: () => Configuration): ModuleWithProviders {\n\t\treturn {\n\t\t\tngModule: Ng2CableModule,\n\t\t\tproviders: [{ provide: Configuration, useFactory: configurationFactory }]\n\t\t}\n\t}\n}"],"names":["define","this","ActionCable"],"mappings":"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"}